@page "/"
@inject HttpClient Http
@using System.Net.Http.Json
<div class="container my-4">
    <h1>Kommande Evenemang</h1>

    @if (events == null)
    {
        <div class="alert alert-info">Laddar evenemang...</div>
    }
    else if (!events.Any())
    {
        <div class="alert alert-warning">Inga evenemang hittades.</div>
    }
    else
    {
        <div class="list-group">
            @foreach (var evt in events)
            {
                <a class="list-group-item list-group-item-action" href="@($"/eventdetails/{evt.Id}")">
                    <strong>@evt.Name</strong> - <span class="text-muted">@evt.Start.ToString("g")</span>
                </a>
            }
        </div>
    }
</div>

@code {
    private List<EventResponse> events;

    protected override async Task OnInitializedAsync()
    {
        // Hämtar data från /events (se till att API:t returnerar rätt data)
        events = await Http.GetFromJsonAsync<List<EventResponse>>("events");
    }

    public class EventResponse
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime Start { get; set; }
        // Lägg till fler propertys om nödvändigt
    }
}
